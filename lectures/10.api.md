---
layout: page
title: BioBlend API
summary: "The Galaxy API enables developers to access Galaxy functionalities using high-level scripts. BioBlend is a Python overlay implemented makes it easy for bioinformaticians to automate end-to-end large data analysis, from scratch, in a way that is highly accessible to collaborators, by allowing them to both provide the required infrastructure and automate complex analyses over large datasets within the familiar Galaxy environment."
---


## Galaxy API
The web interface is appropriate for things like exploratory analysis, visualization, construction of workflows, and rerunning workflows on new datasets. It is thus an excellent tool for designing analyses, recording provenance and facilitating collaboration between bioinformaticians and biologists. 
But the web interface is less suitable for things like:
- Connecting a Galaxy instance directly to your sequencer and running workflows whenever data is ready
- Running a workflow against multiple datasets (which can be done with the web interface, but is tedious)
- When the analysis involves complex control, such as looping and branching.

The Galaxy API addresses these and other situations by exposing Galaxy internals through an additional interface, known as an Applications Programming Interface, or API.

### Enabling API
To use the API, you must first generate an API Key for the account you want to access Galaxy from. You can do so in the UI under user preferences (while logged in).    
### Programming Language Bindings
Various language specific libraries for interfacing with the Galaxy API have been developed by the Galaxy community:
- The Galaxy code itself contains [JavaScript bindings](https://github.com/galaxyproject/galaxy/tree/dev/client/galaxy/scripts/mvc).
- [BioBlend](https://github.com/galaxyproject/bioblend) contains Python bindings:
- [blend4j](https://github.com/jmchilton/blend4j) contains Java bindings largely modeled after BioBlend.
- [blend4php](https://github.com/galaxyproject/blend4php) contains PHP bindings.


## BioBlend Overview
[BioBlend](https://bioblend.readthedocs.io/en/latest/) is a Python library implemented to interact with Galaxy via a straightforward API.    
BioBlend enable developers to manipulate genomic analyses within Galaxy, including data management and workflow execution.   
![Logical structure of BioBlend library modules]({{ste.url}}/images/BioBlend_Logical_Strurcuture.png)
An alternative [object-oriented API](http://bioblend.readthedocs.io/en/latest/api_docs/galaxy/all.html#objects-api) is also available, but it's still incomplete, providing access to a more restricted set of Galaxy modules with respect to the standard one.
### Installation
Stable releases of BioBlend are best installed via ```pip``` or ```easy_install```.
```bash
pip install bioblend
```
Alternatively, you may install the most current source code from [Git repository](https://github.com/galaxyproject/bioblend).

```bash
# Clone the repository to a local directory
$ git clone https://github.com/galaxyproject/bioblend.git
# Install the library
$ cd bioblend
$ python setup.py install
```
After installing the library, you will be able to simply import it into your Python environment with:
```python
import bioblend
```
## GalaxyInstance
A base representation of an instance of Galaxy, identified by a URL and a user’s API key.
```python
from bioblend import galaxy
gi = galaxy.GalaxyInstance(url='http://127.0.0.1:8000', key='your_api_key')
```
After you have created an ```GalaxyInstance``` object, access various modules via the class fields : ```config```, ```libraries```, ```histories```, ```workflows```, ```datasets```, and ```users```
```python
config = gi.config.get_config()
users = gi.users.get_users()
histories = gi.histories.get_histories()
```
## Config
Contains possible interaction dealing with Galaxy configuration. ([View source](https://bioblend.readthedocs.io/en/latest/_modules/bioblend/galaxy/config.html#ConfigClient))
```python
class bioblend.galaxy.config.ConfigClient(galaxy_instance) 
```
### get_config()
Get a list of attributes about the Galaxy instance. More attributes will be present if the user is an admin.
```python
config = gi.config.get_config()
```
> Return type:	list   
Returns:	A list of attributes.

```python
{u'allow_library_path_paste': False,
 u'allow_user_creation': True,
 u'allow_user_dataset_purge': True,
 u'allow_user_deletion': False,
 u'enable_unique_workflow_defaults': False,
 u'ftp_upload_dir': u'/SOMEWHERE/galaxy/ftp_dir',
 u'ftp_upload_site': u'galaxy.com',
 u'library_import_dir': u'None',
 u'logo_url': None,
 u'support_url': u'https://galaxyproject.org/support',
 u'terms_url': None,
 u'user_library_import_dir': None,
 u'wiki_url': u'https://galaxyproject.org/'}
```
### get_version()
Get the current version of the Galaxy instance.
```python
version = gi.config.get_version()
```
> Return type:	dict   
Returns:	Version of the Galaxy instance

```python
{u'extra': {}, u'version_major': u'17.05'}
```
## Libraries
Contains possible interactions with the Galaxy Data Libraries ([View source](https://bioblend.readthedocs.io/en/latest/_modules/bioblend/galaxy/libraries.html#LibraryClient))
```python
class bioblend.galaxy.libraries.LibraryClient(galaxy_instance)
```
### get_libraries()
Get all the libraries or filter for specific one(s) via the provided name or ID. 
```python
libraries = gi.libraries.get_libraries(library_id=None, name=None, deleted=False)
```
Provide only one argument: `name` or `library_id`, but not both.
If ``deleted`` is set to ``True``, return libraries that have been deleted.
> Return type: List    
Returns: list of dicts each containing basic information about a library

```python
[{u'can_user_add': False,
  u'can_user_manage': False,
  u'can_user_modify': False,
  u'create_time': u'2016-12-08T10:55:24.905561',
  u'create_time_pretty': u'6 months ago',
  u'deleted': False,
  u'description': u'',
  u'id': u'105bb2d5978eda3f',
  u'model_class': u'Library',
  u'name': u'first private library',
  u'public': True,
  u'root_folder_id': u'Fb2598cee3751a874',
  u'synopsis': u''},
 {u'can_user_add': False,
  u'can_user_manage': False,
  u'can_user_modify': False,
  u'create_time': u'2009-07-30T15:11:06.232324',
  u'create_time_pretty': u'7 years ago',
  u'deleted': True,
  u'description': u'',
  u'id': u'2498224736779bdb',
  u'model_class': u'Library',
  u'name': u'Nate Test',
  u'public': True,
  u'root_folder_id': u'F652f5dd81838e917',
  u'synopsis': None}]
```
### show_library()
Get information about a library,  by library_id
```python
library = gi.libraries.show_library(library_id, contents=False)
```
`contents=True` if want to get contents of the library (rather than just the library details)
> Return type: Dict     
Returns: Dictionary containg details of the given library

```python
# id contents=False
{u'can_user_add': False,
 u'can_user_manage': False,
 u'can_user_modify': False,
 u'create_time': u'2016-12-08T10:55:24.905561',
 u'create_time_pretty': u'6 months ago',
 u'deleted': False,
 u'description': u'',
 u'id': u'105bb2d5978eda3f',
 u'model_class': u'Library',
 u'name': u'first private library',
 u'public': True,
 u'root_folder_id': u'Fb2598cee3751a874',
 u'synopsis': u''}
 
 # if contents=True
 [{u'id': u'Fb2598cee3751a874',
  u'name': u'/',
  u'type': u'folder',
  u'url': u'/api/libraries/105bb2d5978eda3f/contents/Fb2598cee3751a874'}]
```
### create_library()
Create a data library with the properties defined in the arguments.
```python
l = gi.libraries.create_library(name, description=None, synopsis=None)
```
> Return type: Dict    
Returns: 	
Details of the created library.

```python
{u'can_user_add': False,
 u'can_user_manage': False,
 u'can_user_modify': False,
 u'create_time': u'2017-06-20T10:40:07.203839',
 u'create_time_pretty': u'',
 u'deleted': False,
 u'description': u'Library from bioblend',
 u'id': u'af2dc2a1ab633018',
 u'model_class': u'Library',
 u'name': u'Dummy Library',
 u'public': True,
 u'root_folder_id': u'F6e353dd7bf64a026',
 u'synopsis': u''}
```

### get_folders()
Get all the folders or filter specific one(s) via the provided `name` or `folder_id` in data library with id `library_id`. 
```python
folders = gi.libraries.get_folders(library_id, folder_id=None, name=None)
```
Provide only one argument: `name` or `folder_id`, but not both. 
For `name` specify the full path of the folder starting from the library’s root folder, e.g. `/subfolder/subsubfolder`.
> Return type: List     
Returns: list of dicts each containing basic information about a folder

```python
[{u'id': u'Fb2598cee3751a874',
  u'name': u'/',
  u'type': u'folder',
  u'url': u'/api/libraries/105bb2d5978eda3f/contents/Fb2598cee3751a874'}]
```
### show_folder()
Get details about a given folder.
```python
folder = gi.libraries.show_folder(library_id, folder_id)
```
 The required `folder_id` can be obtained from the folder’s library content details.




















## Histories
Contains possible interactions with the Galaxy Histories ([View source](https://bioblend.readthedocs.io/en/latest/_modules/bioblend/galaxy/histories.html#HistoryClient))
```python
class bioblend.galaxy.histories.HistoryClient(galaxy_instance)
```
### get_histories()
Get all histories or filter the specific one(s) via the provided ``name`` or ``history_id``.    
```python
histories = gi.histories.get_histories(history_id=None, name=None, deleted=False)
```
Provide only one argument, ``name`` or ``history_id``, but not both.   
If ``deleted`` is set to ``True``, return histories that have been deleted.

> Return type: list   
Returns: A list of history element dicts. If more than one
history matches the given ``name``, return the list of all the
histories with the given name

```python
[{u'annotation': None,
  u'deleted': False,
  u'id': u'7f929922b23b572f',
  u'model_class': u'History',
  u'name': u'Dummy history',
  u'published': False,
  u'purged': False,
  u'tags': [],
  u'url': u'/api/histories/7f929922b23b572f'}]
```
### show_history()
Get details of a given history. By default, just get the history meta information.
```python
h = gi.histories.show_history(history_id, contents=False, deleted=None, visible=None, details=None, types=None)
```
When ``contents=True``, show_histor() returns the complete list of datasets in the given history:
- ```deleted```: includes deleted datasets in history dataset list
- `visible`: includes only visible datasets in history dataset list
- ``details``: includes dataset details. Set to 'all' for the most information
> Return type: dict    
Returns: details of the given history

```python
{u'annotation': None,
 u'contents_url': u'/api/histories/7f929922b23b572f/contents',
 u'create_time': u'2017-01-10T13:28:03.575271',
 u'deleted': False,
 u'empty': False,
 u'genome_build': u'?',
 u'id': u'7f929922b23b572f',
 u'importable': False,
 u'model_class': u'History',
 u'name': u'Dummy history',
 u'published': False,
 u'purged': False,
 u'size': 408,
 u'slug': None,
 u'state': u'queued',
 u'state_details': {u'discarded': 0,
  u'empty': 0,
  u'error': 4,
  u'failed_metadata': 0,
  u'new': 6,
  u'ok': 5,
  u'paused': 3,
  u'queued': 0,
  u'running': 0,
  u'setting_metadata': 0,
  u'upload': 0},
 u'state_ids': {u'discarded': [],
  u'empty': [],
  u'error': [u'bbd44e69cb8906b55d65844668967e13',
   u'bbd44e69cb8906b54c7a94ab2e8141db',
   u'bbd44e69cb8906b5cc2a51c1c19368b5',
   u'bbd44e69cb8906b54ce551cbcb48857f'],
  u'failed_metadata': [],
  u'new': [u'bbd44e69cb8906b5c903f9b2ad625329',
   u'bbd44e69cb8906b5400483ab6b6db0bf',
   u'bbd44e69cb8906b5ed51476b38eb4011',
   u'bbd44e69cb8906b50ab8299b1973e8aa',
   u'bbd44e69cb8906b5c4d0a26e6a56f9bf',
   u'bbd44e69cb8906b58de2f1230120bae4'],
  u'ok': [u'bbd44e69cb8906b5ce7fe31bd9b0016a',
   u'bbd44e69cb8906b5a90837cc6d7119fb',
   u'bbd44e69cb8906b5da3212bbb1d5b2ad',
   u'bbd44e69cb8906b5c6d64c61a117ad23',
   u'bbd44e69cb8906b5a1e757c207380ab5',
   u'bbd44e69cb8906b5f12e91ed91c973e8',
   u'bbd44e69cb8906b5792974169f04a06f',
   u'bbd44e69cb8906b5b11e71f4d1889ae2'],
  u'paused': [u'bbd44e69cb8906b5e4c8e2714eb61373',
   u'bbd44e69cb8906b5933289da7d7c112b',
   u'bbd44e69cb8906b580708c09b4073ac7'],
  u'queued': [],
  u'running': [],
  u'setting_metadata': [],
  u'upload': []},
 u'tags': [],
 u'update_time': u'2017-01-13T14:30:36.179669',
 u'url': u'/api/histories/7f929922b23b572f',
 u'user_id': u'bd0631c5dfef81b1',
 u'username_and_slug': None}
```
### create_history()
Create a new history, optionally setting the `name`.
```python
h = gi.histories.create_history(name=None)
```
> Return type: dict    
Returns: Dictionary containing information about newly created history

```python
{u'annotation': None,
 u'contents_url': u'/api/histories/a956ab1d3d21799b/contents',
 u'create_time': u'2017-06-19T16:45:36.035290',
 u'deleted': False,
 u'empty': True,
 u'genome_build': None,
 u'id': u'a956ab1d3d21799b',
 u'importable': False,
 u'model_class': u'History',
 u'name': u'Unnamed history',
 u'published': False,
 u'purged': False,
 u'size': 0,
 u'slug': None,
 u'state': u'new',
 u'state_details': {u'discarded': 0,
  u'empty': 0,
  u'error': 0,
  u'failed_metadata': 0,
  u'new': 0,
  u'ok': 0,
  u'paused': 0,
  u'queued': 0,
  u'running': 0,
  u'setting_metadata': 0,
  u'upload': 0},
 u'state_ids': {u'discarded': [],
  u'empty': [],
  u'error': [],
  u'failed_metadata': [],
  u'new': [],
  u'ok': [],
  u'paused': [],
  u'queued': [],
  u'running': [],
  u'setting_metadata': [],
  u'upload': []},
 u'tags': [],
 u'update_time': u'2017-06-19T16:45:36.035307',
 u'url': u'/api/histories/a956ab1d3d21799b',
 u'user_id': u'bd0631c5dfef81b1',
 u'username_and_slug': None}
```
### delete_history()
Delete a history. (Marking it as deleted).
```python
d = gi.histories.delete_history(history_id, purge=False)
```
if `purge=True`, also purge (permanently delete) the history (but the Galaxy instance must have the `allow_user_dataset_purge option=True` in the `config/galaxy.ini` configuration file.).   
There is an apposite method, to mark it as undelete
```python
d = gi.histories.undelete_history(history_id)
```
### update_history()
Update history metadata information. 
```python
u = gi.histories.update_history(history_id, **kwds)
```
 Some of the attributes that can be modified are documented below.
>    
- name (str) – Replace history name with the given string
- annotation (str) – Replace history annotation with given string
- deleted (bool) – Mark or unmark history as deleted
- purged (bool) – If True, mark history as purged (permanently deleted). Ignored on Galaxy release_15.01 and earlier
- published (bool) – Mark or unmark history as published
- importable (bool) – Mark or unmark history as importable
- tags (list) – Replace history tags with the given list

> Return type: dict    
Returns: Dictionary containing details of the updated history

### get_status()
Returns the state of this history.
```python
s = gi.histories.get_status(history_id)
```
> Return type: dict    
Returns: A dict documenting the current state of the history.        
- ‘state’ = This is the current state of the history, such as ok, error, new etc.
- ‘state_details’ = Contains individual statistics for various dataset states. 
- ‘percent_complete’ = The overall number of datasets processed to completion.

```python
{'percent_complete': 27,
 'state': u'queued',
 'state_details': {u'discarded': 0,
  u'empty': 0,
  u'error': 4,
  u'failed_metadata': 0,
  u'new': 6,
  u'ok': 5,
  u'paused': 3,
  u'queued': 0,
  u'running': 0,
  u'setting_metadata': 0,
  u'upload': 0}}
```
### show_dataset()
Get details about a given history dataset.
```python
dataset = gi.histories.show_dataset(history_id, dataset_id)
```
> Return type: dict    
Returns : Dictionary containing details of the given dataset  in the given history

```python
{u'accessible': True,
 u'annotation': None,
 u'api_type': u'file',
 u'create_time': u'2017-01-13T10:29:05.946854',
 u'creating_job': u'cf4ef221d2783a89',
 u'data_type': u'galaxy.datatypes.tabular.Tabular',
 u'dataset_id': u'0674c2fea6a8838a',
 u'deleted': True,
 u'display_apps': [],
 u'display_types': [],
 u'download_url': u'/api/histories/7f929922b23b572f/contents/bbd44e69cb8906b5ce7fe31bd9b0016a/display',
 u'extension': u'tabular',
 u'file_ext': u'tabular',
 u'file_size': 974,
 u'genome_build': u'?',
 u'hda_ldda': u'hda',
 u'hid': 1,
 u'history_content_type': u'dataset',
 u'history_id': u'7f929922b23b572f',
 u'id': u'bbd44e69cb8906b5ce7fe31bd9b0016a',
 u'meta_files': [],
 u'metadata_column_names': None,
 u'metadata_column_types': [u'str',
  u'float',
  u'float',
  u'float',
  u'float',
  u'float',
  u'float',
  u'float'],
 u'metadata_columns': 8,
 u'metadata_comment_lines': 1,
 u'metadata_data_lines': 20,
 u'metadata_dbkey': u'?',
 u'metadata_delimiter': u'\t',
 u'misc_blurb': u'20 lines, 1 comments',
 u'misc_info': u'',
 u'model_class': u'HistoryDatasetAssociation',
 u'name': u'amino_acid_features.txt',
 u'peek': u'<table cellspacing="0" cellpadding="3"><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr><tr><td>#</td><td>Hydrophobicity</td><td>Membrane</td><td>Flexibility</td><td>Volume</td><td>Buried</td><td>Helix</td><td>Beta</td></tr><tr><td>Alanine</td><td>0.61</td><td>1.56</td><td>0.357</td><td>52.6</td><td>91.5</td><td>1.42</td><td>0.83</td></tr><tr><td>Arginine</td><td>0.6</td><td>0.45</td><td>0.529</td><td>109.1</td><td>202</td><td>0.98</td><td>0.93</td></tr><tr><td>Asparagine</td><td>0.06</td><td>0.27</td><td>0.463</td><td>75.7</td><td>135.2</td><td>0.67</td><td>0.89</td></tr><tr><td>Aspartic</td><td>0.46</td><td>0.14</td><td>0.511</td><td>68.4</td><td>124.5</td><td>1.01</td><td>0.54</td></tr><tr><td>Cysteine</td><td>1.07</td><td>1.23</td><td>0.346</td><td>68.3</td><td>117.7</td><td>0.7</td><td>1.19</td></tr></table>',
 u'purged': True,
 u'rerunnable': False,
 u'resubmitted': False,
 u'state': u'ok',
 u'tags': [],
 u'type': u'file',
 u'type_id': u'dataset-bbd44e69cb8906b5ce7fe31bd9b0016a',
 u'update_time': u'2017-01-28T04:46:48.999395',
 u'url': u'/api/histories/7f929922b23b572f/contents/bbd44e69cb8906b5ce7fe31bd9b0016a',
 u'uuid': u'93adc5f1-f212-4d31-a84f-a8e39e27821f',
 u'visible': True,
 u'visualizations': [{u'embeddable': False,
   u'href': u'/plugins/visualizations/charts/show?dataset_id=bbd44e69cb8906b5ce7fe31bd9b0016a',
   u'html': u'Charts',
   u'target': u'galaxy_main'},
  {u'embeddable': False,
   u'href': u'/plugins/visualizations/scatterplot/show?dataset_id=bbd44e69cb8906b5ce7fe31bd9b0016a',
   u'html': u'Scatterplot',
   u'target': u'galaxy_main'},
  {u'embeddable': False,
   u'href': u'/plugins/interactive_environments/jupyter/show?dataset_id=bbd44e69cb8906b5ce7fe31bd9b0016a',
   u'html': u'Jupyter',
   u'target': u'galaxy_main'}]}
```
### show_dataset_provenance()
Get details related to how dataset was created (`id`, `job_id`, `tool_id`, `stdout`, `stderr`, `parameters`, `inputs`, etc...).
```python
provenance = gi.histories.show_dataset_provenance(history_id, dataset_id, follow=False)
```
If `follow=True`, recursively fetch dataset provenance information for all inputs and their inputs.
> Return type: dict   
Returns:  Dictionary containing provenance of the given dataset  in the given history

```python
{u'id': u'cc714f93cb88b900',
 u'job_id': u'cf4ef221d2783a89',
 u'parameters': {u'async_datasets': u'"None"',
  u'dbkey': u'"?"',
  u'file_type': u'"auto"',
  u'files': u'[{"to_posix_lines": "Yes", "NAME": "None", "file_data": "/galaxy-repl/main/upload/0018550056", "space_to_tab": null, "url_paste": "None", "__index__": 0, "ftp_files": null, "uuid": "None"}]',
  u'files_metadata': u'{"file_type": "auto", "__current_case__": 31}',
  u'paramfile': u'"/galaxy/main/scratch/tmp_I9NFp"'},
 u'stderr': u'',
 u'stdout': u'',
 u'tool_id': u'upload1',
 u'uuid': u'93adc5f1-f212-4d31-a84f-a8e39e27821f'}
```

### update_dataset()
Update history dataset metadata.
```python
u = gi.histories.update_dataset(history_id, dataset_id, **kwds)
```
Some of the attributes that can be modified are documented below.
> 
- name (str) – Replace history dataset name with the given string
- genome_build (str) – Replace history dataset genome build (dbkey)
- annotation (str) – Replace history dataset annotation with given string
- deleted (bool) – Mark or unmark history dataset as deleted
- visible (bool) – Mark or unmark history dataset as visible

> Return type: dict    
Returns: Dictionary containing details of the updated dataset.

### delete_dataset()
Mark corresponding dataset as deleted.
```python
d = gi.histories.delete_dataset(history_id, dataset_id, purge=False)
```
if `purge=True`, also purge (permanently delete) the dataset. (but the Galaxy instance must have the `allow_user_dataset_purge=True` in the `config/galaxy.ini` configuration file.).
### upload_dataset_from_library()
Upload a dataset into the history from a library. 
```python
u = gi.histories.upload_dataset_from_library(history_id, lib_dataset_id)
```
Requires the library dataset ID, which can be obtained from the library contents.
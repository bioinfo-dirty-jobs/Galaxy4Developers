---
layout: page
title: BioBlend API
summary: "The Galaxy API enables developers to access Galaxy functionalities using high-level scripts. BioBlend is a Python overlay implemented makes it easy for bioinformaticians to automate end-to-end large data analysis, from scratch, in a way that is highly accessible to collaborators, by allowing them to both provide the required infrastructure and automate complex analyses over large datasets within the familiar Galaxy environment."
---


## Galaxy API
The web interface is appropriate for things like exploratory analysis, visualization, construction of workflows, and rerunning workflows on new datasets. It is thus an excellent tool for designing analyses, recording provenance and facilitating collaboration between bioinformaticians and biologists. 
But the web interface is less suitable for things like:
- Connecting a Galaxy instance directly to your sequencer and running workflows whenever data is ready
- Running a workflow against multiple datasets (which can be done with the web interface, but is tedious)
- When the analysis involves complex control, such as looping and branching.

The Galaxy API addresses these and other situations by exposing Galaxy internals through an additional interface, known as an Applications Programming Interface, or API.

### Enabling API
To use the API, you must first generate an API Key for the account you want to access Galaxy from. You can do so in the UI under user preferences (while logged in).    
### Programming Language Bindings
Various language specific libraries for interfacing with the Galaxy API have been developed by the Galaxy community:
- The Galaxy code itself contains [JavaScript bindings](https://github.com/galaxyproject/galaxy/tree/dev/client/galaxy/scripts/mvc).
- [BioBlend](https://github.com/galaxyproject/bioblend) contains Python bindings:
- [blend4j](https://github.com/jmchilton/blend4j) contains Java bindings largely modeled after BioBlend.
- [blend4php](https://github.com/galaxyproject/blend4php) contains PHP bindings.


## BioBlend Overview
[BioBlend](https://bioblend.readthedocs.io/en/latest/) is a Python library implemented to interact with Galaxy via a straightforward API.    
BioBlend enable developers to manipulate genomic analyses within Galaxy, including data management and workflow execution.   
![Logical structure of BioBlend library modules]({{ste.url}}/images/BioBlend_Logical_Strurcuture.png)
An alternative [object-oriented API](http://bioblend.readthedocs.io/en/latest/api_docs/galaxy/all.html#objects-api) is also available, but it's still incomplete, providing access to a more restricted set of Galaxy modules with respect to the standard one.
### Installation
Stable releases of BioBlend are best installed via ```pip``` or ```easy_install```.
```bash
pip install bioblend
```
Alternatively, you may install the most current source code from [Git repository](https://github.com/galaxyproject/bioblend).

```bash
# Clone the repository to a local directory
$ git clone https://github.com/galaxyproject/bioblend.git
# Install the library
$ cd bioblend
$ python setup.py install
```
After installing the library, you will be able to simply import it into your Python environment with:
```python
import bioblend
```
## GalaxyInstance
A base representation of an instance of Galaxy, identified by a URL and a userâ€™s API key.
```python
from bioblend import galaxy
gi = galaxy.GalaxyInstance(url='http://127.0.0.1:8000', key='your_api_key')
```
After you have created an ```GalaxyInstance``` object, access various modules via the class fields : ```config```, ```libraries```, ```histories```, ```workflows```, ```datasets```, and ```users```
```python
config = gi.config.get_config()
users = gi.users.get_users()
histories = gi.histories.get_histories()
```
## Config
Contains possible interaction dealing with Galaxy configuration. ([View source](https://bioblend.readthedocs.io/en/latest/_modules/bioblend/galaxy/config.html#ConfigClient))
```python
class bioblend.galaxy.config.ConfigClient(galaxy_instance) 
```
### get_config()
Get a list of attributes about the Galaxy instance. More attributes will be present if the user is an admin.
```python
config = gi.config.get_config()
```
> Return type:	list   
Returns:	A list of attributes.

```python
{u'allow_library_path_paste': False,
 u'allow_user_creation': True,
 u'allow_user_dataset_purge': True,
 u'allow_user_deletion': False,
 u'enable_unique_workflow_defaults': False,
 u'ftp_upload_dir': u'/SOMEWHERE/galaxy/ftp_dir',
 u'ftp_upload_site': u'galaxy.com',
 u'library_import_dir': u'None',
 u'logo_url': None,
 u'support_url': u'https://galaxyproject.org/support',
 u'terms_url': None,
 u'user_library_import_dir': None,
 u'wiki_url': u'https://galaxyproject.org/'}
```

### get_version()
Get the current version of the Galaxy instance.
```python
version = gi.config.get_version()
```
> Return type:	dict   
Returns:	Version of the Galaxy instance

```python
{u'extra': {}, u'version_major': u'17.05'}
```
## Histories
Contains possible interactions with the Galaxy Histories ([View source](https://bioblend.readthedocs.io/en/latest/_modules/bioblend/galaxy/histories.html#HistoryClient))
```python
class bioblend.galaxy.histories.HistoryClient(galaxy_instance)
```
### get_histories()
Get all histories or filter the specific one(s) via the provided ``name`` or ``history_id``.    
```python
histories = gi.histories.get_histories(history_id=None, name=None, deleted=False)
```
Provide only one argument, ``name`` or ``history_id``, but not both.   
If ``deleted`` is set to ``True``, return histories that have been deleted.

> Return type: list   
Returns: A list of history element dicts. If more than one
history matches the given ``name``, return the list of all the
histories with the given name

```python
[{u'annotation': None,
  u'deleted': False,
  u'id': u'7f929922b23b572f',
  u'model_class': u'History',
  u'name': u'Dummy history',
  u'published': False,
  u'purged': False,
  u'tags': [],
  u'url': u'/api/histories/7f929922b23b572f'}]
```
### show_history()
Get details of a given history. By default, just get the history meta information.
```python
h = gi.histories.show_history(history_id, contents=False, deleted=None, visible=None, details=None, types=None)
```
When ``contents=True``, show_histor() returns the complete list of datasets in the given history:
- ```deleted```: includes deleted datasets in history dataset list
- `visible`: includes only visible datasets in history dataset list
- ``details``: includes dataset details. Set to 'all' for the most information
> Return type: dict    
Returns: details of the given history

```python
{u'annotation': None,
 u'contents_url': u'/api/histories/7f929922b23b572f/contents',
 u'create_time': u'2017-01-10T13:28:03.575271',
 u'deleted': False,
 u'empty': False,
 u'genome_build': u'?',
 u'id': u'7f929922b23b572f',
 u'importable': False,
 u'model_class': u'History',
 u'name': u'Dummy history',
 u'published': False,
 u'purged': False,
 u'size': 408,
 u'slug': None,
 u'state': u'queued',
 u'state_details': {u'discarded': 0,
  u'empty': 0,
  u'error': 4,
  u'failed_metadata': 0,
  u'new': 6,
  u'ok': 5,
  u'paused': 3,
  u'queued': 0,
  u'running': 0,
  u'setting_metadata': 0,
  u'upload': 0},
 u'state_ids': {u'discarded': [],
  u'empty': [],
  u'error': [u'bbd44e69cb8906b55d65844668967e13',
   u'bbd44e69cb8906b54c7a94ab2e8141db',
   u'bbd44e69cb8906b5cc2a51c1c19368b5',
   u'bbd44e69cb8906b54ce551cbcb48857f'],
  u'failed_metadata': [],
  u'new': [u'bbd44e69cb8906b5c903f9b2ad625329',
   u'bbd44e69cb8906b5400483ab6b6db0bf',
   u'bbd44e69cb8906b5ed51476b38eb4011',
   u'bbd44e69cb8906b50ab8299b1973e8aa',
   u'bbd44e69cb8906b5c4d0a26e6a56f9bf',
   u'bbd44e69cb8906b58de2f1230120bae4'],
  u'ok': [u'bbd44e69cb8906b5ce7fe31bd9b0016a',
   u'bbd44e69cb8906b5a90837cc6d7119fb',
   u'bbd44e69cb8906b5da3212bbb1d5b2ad',
   u'bbd44e69cb8906b5c6d64c61a117ad23',
   u'bbd44e69cb8906b5a1e757c207380ab5',
   u'bbd44e69cb8906b5f12e91ed91c973e8',
   u'bbd44e69cb8906b5792974169f04a06f',
   u'bbd44e69cb8906b5b11e71f4d1889ae2'],
  u'paused': [u'bbd44e69cb8906b5e4c8e2714eb61373',
   u'bbd44e69cb8906b5933289da7d7c112b',
   u'bbd44e69cb8906b580708c09b4073ac7'],
  u'queued': [],
  u'running': [],
  u'setting_metadata': [],
  u'upload': []},
 u'tags': [],
 u'update_time': u'2017-01-13T14:30:36.179669',
 u'url': u'/api/histories/7f929922b23b572f',
 u'user_id': u'bd0631c5dfef81b1',
 u'username_and_slug': None}
```
### create_history()
Create a new history, optionally setting the `name`.
```python
h = gi.histories.create_history(name=None)
```
> Return type: dict    
Returns: Dictionary containing information about newly created history

```python
{u'annotation': None,
 u'contents_url': u'/api/histories/a956ab1d3d21799b/contents',
 u'create_time': u'2017-06-19T16:45:36.035290',
 u'deleted': False,
 u'empty': True,
 u'genome_build': None,
 u'id': u'a956ab1d3d21799b',
 u'importable': False,
 u'model_class': u'History',
 u'name': u'Unnamed history',
 u'published': False,
 u'purged': False,
 u'size': 0,
 u'slug': None,
 u'state': u'new',
 u'state_details': {u'discarded': 0,
  u'empty': 0,
  u'error': 0,
  u'failed_metadata': 0,
  u'new': 0,
  u'ok': 0,
  u'paused': 0,
  u'queued': 0,
  u'running': 0,
  u'setting_metadata': 0,
  u'upload': 0},
 u'state_ids': {u'discarded': [],
  u'empty': [],
  u'error': [],
  u'failed_metadata': [],
  u'new': [],
  u'ok': [],
  u'paused': [],
  u'queued': [],
  u'running': [],
  u'setting_metadata': [],
  u'upload': []},
 u'tags': [],
 u'update_time': u'2017-06-19T16:45:36.035307',
 u'url': u'/api/histories/a956ab1d3d21799b',
 u'user_id': u'bd0631c5dfef81b1',
 u'username_and_slug': None}
```
### delete_history()
Delete a history: marks as deleted.
```python
d = gi.histories.delete_history(history_id, purge=False)
```
if `purge=True`, also purge (permanently delete) the history (but the Galaxy instance must have the allow_user_dataset_purge option set to True in the config/galaxy.ini configuration file.).